{% extends "base.html" %}

{% block page_title %}Add Expense{% endblock %}

{% block page_subtitle %}
<p class="text-muted mb-0">
    Record an expense using a saved expense type or a custom description. If you leave the date empty,
    today's date will be used.
</p>
{% endblock %}

{% block content %}

<style>
    .expense-wrapper {
        max-width: 620px;
        margin: 0 auto;
    }

    .expense-card {
        border-radius: 20px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 14px 40px rgba(15, 23, 42, 0.16);
        overflow: hidden;
        background: #ffffff;
    }

    .expense-header {
        padding: 16px 20px 14px;
        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        color: #e5edff;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .expense-header-icon {
        width: 42px;
        height: 42px;
        border-radius: 999px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
        background: rgba(15, 23, 42, 0.4);
        border: 1px solid rgba(191, 219, 254, 0.7);
        color: #f9fafb;
    }

    .expense-header-title {
        font-size: 17px;
        font-weight: 600;
    }

    .expense-header-sub {
        font-size: 12px;
        opacity: 0.9;
    }

    .expense-body {
        padding: 22px 22px 18px;
    }

    .expense-label {
        font-size: 13px;
        font-weight: 600;
        color: #111827;
    }

    .expense-hint {
        font-size: 11px;
        color: #9ca3af;
    }

    .expense-input,
    .expense-select {
        border-radius: 12px;
        border: 1px solid #d1d5db;
        background: #f9fafb;
        padding: 9px 11px;
        font-size: 14px;
        transition: all .15s ease;
    }

    .expense-input:focus,
    .expense-select:focus {
        background: #ffffff;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.35);
        outline: none;
    }

    .expense-input-group .input-group-text {
        border-radius: 12px 0 0 12px;
        border-right: 0;
        background: #eff6ff;
        color: #1d4ed8;
        border-color: #d1d5db;
        font-size: 14px;
        font-weight: 600;
    }

    .expense-input-group .expense-input {
        border-radius: 0 12px 12px 0;
        border-left: 0;
    }

    .expense-footer {
        padding-top: 8px;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
    }

    .expense-btn {
        border-radius: 999px;
        padding: 9px 20px;
        font-size: 14px;
        font-weight: 500;
        border: none;
        background: linear-gradient(90deg, #2563eb, #3b82f6);
        color: #f9fafb;
        box-shadow: 0 10px 24px rgba(37, 99, 235, 0.35);
        transition: all .12s ease;
    }

    .expense-btn:hover {
        filter: brightness(1.03);
        transform: translateY(-1px);
        box-shadow: 0 14px 30px rgba(37, 99, 235, 0.45);
    }

    .expense-btn:active {
        transform: translateY(0);
        box-shadow: 0 8px 18px rgba(37, 99, 235, 0.35);
    }
</style>

<div class="expense-wrapper">
    <div class="card expense-card">

        <div class="expense-header">
            <div class="expense-header-icon">
                <i class="bi bi-receipt"></i>
            </div>
            <div>
                <div class="expense-header-title">Record a New Expense</div>
                <div class="expense-header-sub">
                    Choose a saved expense type and add amount &amp; description.
                </div>
            </div>
        </div>

        <div class="expense-body">
            <form method="post" autocomplete="off">

                <!-- Date -->
                <div class="mb-3">
                    <label class="expense-label">Date (optional)</label>
                    <input type="date" name="date" class="form-control expense-input">
                    <div class="expense-hint mt-1">
                        Leave empty to use today's date.
                    </div>
                </div>

                <!-- Saved expense type -->
                <div class="mb-3">
                    <label class="expense-label">Saved Expense Type</label>
                    <select name="template_id" class="form-select expense-select">
                        <option value="">-- None (custom) --</option>
                        {% for t in templates %}
                            <option value="{{ t.id }}">{{ t.name }}</option>
                        {% endfor %}
                    </select>
                    <div class="expense-hint mt-1">
                        Pick from your predefined expense types (created in <strong>Create Expense</strong>).
                    </div>
                </div>

                {# Custom category block is kept commented out as in your original
                <div class="mb-3">
                    <label class="expense-label">Category (custom)</label>
                    <input type="text" name="category" class="form-control expense-input"
                           placeholder="e.g. Electricity, Staff Food, House Rent">
                </div>
                #}

                <!-- Description -->
                <div class="mb-3">
                    <label class="expense-label">Description</label>
                    <input type="text"
                           name="description"
                           class="form-control expense-input"
                           placeholder="Short details (optional)">
                </div>

                <!-- Amount -->
                <div class="mb-2">
                    <label class="expense-label">Amount</label>
                    <div class="input-group expense-input-group">
                        <span class="input-group-text">à§³</span>
                        <input type="number"
                               step="0.01"
                               name="amount"
                               class="form-control expense-input"
                               placeholder="0.00"
                               required>
                    </div>
                </div>

                <div class="expense-footer">
                    <button type="submit" class="expense-btn">
                        Save Expense
                    </button>
                </div>

            </form>
        </div>

    </div>
</div>

{% endblock %}

{% extends "base.html" %}

{% block page_title %}Reports{% endblock %}
{% block page_subtitle %}{% endblock %}

{% block content %}

<style>
    /* Full screen escape from container */
    .report-fullscreen {
        width: 100vw;
        height: calc(100vh - 70px); /* adjust for top bar height */
        margin-left: calc(50% - 50vw);
        margin-right: calc(50% - 50vw);

        display: flex;
        justify-content: center;
        align-items: center;

        background: linear-gradient(135deg, #e0e5f2, #469fd7);
        padding: 25px 10px;
    }

    /* Card */
    .report-card {
        width: 100%;
        max-width: 650px;

        border-radius: 22px;
        background: #ffffff;
        border: 1px solid rgba(255, 255, 255, 0.25);
        box-shadow: 0 18px 50px rgba(0, 0, 0, 0.25);

        overflow: hidden;
        animation: fadeIn .4s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Header */
    .report-header {
        padding: 20px;
        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        color: #f1f5ff;

        display: flex;
        align-items: center;
        gap: 12px;
    }

    .report-header-icon {
        width: 46px;
        height: 46px;

        border-radius: 999px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;

        background: rgba(255, 255, 255, 0.12);
        border: 1px solid rgba(255, 255, 255, 0.25);
    }

    .report-title {
        font-size: 18px;
        font-weight: 600;
    }

    .report-sub {
        font-size: 12px;
        opacity: 0.9;
    }

    /* Body */
    .report-body {
        padding: 25px 25px 20px;
    }

    .step-title {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: #6b7280;
        margin-bottom: 4px;
        font-weight: 600;
    }

    .report-label {
        font-size: 13px;
        font-weight: 600;
        color: #111827;
    }

    /* Input fields */
    .report-input,
    .report-select {
        border-radius: 12px;
        border: 1px solid #d1d5db;
        background: #f9fafb;
        font-size: 14px;
        padding: 9px 12px;
        transition: all .15s ease;
    }

    .report-input:focus,
    .report-select:focus {
        background: #ffffff;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.35);
        outline: none;
    }

    /* Radio group */
    .scope-box {
        background: #f1f5ff;
        border: 1px solid #dbeafe;
        padding: 12px;
        border-radius: 16px;
    }

    .scope-option label {
        font-size: 13px;
        margin-left: 6px;
        cursor: pointer;
    }

    .form-check-input {
        cursor: pointer;
        border-radius: 999px !important;
    }

    .form-check-input:checked {
        background-color: #2563eb;
        border-color: #2563eb;
        box-shadow: 0 0 0 2px rgba(59, 130, 246, .35);
    }

    /* Divider */
    .divider {
        width: 100%;
        height: 1px;
        background: #e5e7eb;
        margin: 14px 0;
    }

    /* Button */
    .report-btn {
        border-radius: 999px;
        width: 100%;
        padding: 11px;
        background: linear-gradient(90deg, #2563eb, #3b82f6);
        border: none;

        color: #f9fafb;
        font-size: 15px;
        font-weight: 600;

        box-shadow: 0 12px 25px rgba(59,130,246,.35);
        transition: all .12s ease;
    }

    .report-btn:hover {
        transform: translateY(-1px);
        filter: brightness(1.04);
        box-shadow: 0 16px 32px rgba(59,130,246,.45);
    }
</style>

<div class="report-fullscreen">

    <div class="report-card">

        <div class="report-header">
            <div class="report-header-icon">
                <i class="bi bi-graph-up-arrow"></i>
            </div>
            <div>
                <div class="report-title">Build Finance Report</div>
                <div class="report-sub">Select date range, scope, and filters.</div>
            </div>
        </div>

        <div class="report-body">
            <form method="post" autocomplete="off" target="_blank">

                <!-- STEP 1 -->
                <div class="step-title">Step 1 · Select date range</div>
                <div class="row g-2 mb-3">
                    <div class="col-sm-6">
                        <label class="report-label">Start date</label>
                        <input type="date" name="start_date" class="form-control report-input" required>
                    </div>
                    <div class="col-sm-6">
                        <label class="report-label">End date</label>
                        <input type="date" name="end_date" class="form-control report-input" required>
                    </div>
                </div>

                <div class="divider"></div>

                <!-- STEP 2 -->
                <div class="step-title">Step 2 · Choose report scope</div>
                <div class="scope-box mb-3">

                    <div class="form-check scope-option">
                        <input class="form-check-input" type="radio" name="report_type" id="rt_all" value="all" checked>
                        <label for="rt_all">All (collections & expenses)</label>
                    </div>

                    <div class="form-check scope-option mt-1">
                        <input class="form-check-input" type="radio" name="report_type" id="rt_col" value="collection">
                        <label for="rt_col">Collections only</label>
                    </div>

                    <div class="form-check scope-option mt-1">
                        <input class="form-check-input" type="radio" name="report_type" id="rt_exp" value="expenses">
                        <label for="rt_exp">Expenses only</label>
                    </div>

                </div>

                <div class="divider"></div>

                <!-- STEP 3 -->
                <div class="step-title">Step 3 · Expense category (optional)</div>
                <div class="mb-3">
                    <label class="report-label">Expense category</label>
                    <select name="expense_category" class="form-select report-select">
                        <option value="">All expenses</option>
                        {% for cat in expense_categories %}
                        <option value="{{ cat }}">{{ cat }}</option>
                        {% endfor %}
                    </select>
                </div>

                <button type="submit" class="report-btn mt-3">
                    Open Report
                </button>

            </form>
        </div>
    </div>
</div>

{% endblock %}
